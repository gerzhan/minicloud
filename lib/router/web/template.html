<html>

<head>
    <!--ie edge-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--360 browser defaut webkit-->
    <meta content="webkit" name="renderer">
</head>

<body>
    <div id='minicloud-loading'>
        <!--loading-->
        <style type="text/css">
        .loader-overlay {
            -moz-opacity: 1;
            -moz-perspective: 10000;
            -moz-perspective: 10000px;
            -moz-transition: all 800ms ease-in-out;
            -o-transition: all 800ms ease-in-out;
            -webkit-opacity: 1;
            -webkit-perspective: 10000;
            -webkit-perspective: 10000px;
            -webkit-transition: all 800ms ease-in-out;
            background: #2D2E2F;
            bottom: 0;
            filter: alpha(opacity=100);
            left: 0;
            opacity: 1;
            overflow: hidden;
            perspective: 10000;
            perspective: 10000px;
            position: fixed;
            right: 0;
            top: 0;
            transition: all 800ms ease-in-out;
            z-index: 10000;
            zoom: 1;
        }
        
        .loader-overlay .loader-inner {
            left: 50%;
            margin-left: -15px;
            margin-top: -15px;
            position: absolute;
            top: 50%;
        }
        
        .loader-overlay.loaded {
            -moz-opacity: 0;
            -webkit-opacity: 0;
            filter: alpha(opacity=0);
            opacity: 0;
            visibility: hidden;
            zoom: 1;
        }
        
        .spinner {
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            -webkit-user-select: none;
            bottom: 0;
            height: 2em;
            left: 0;
            margin: auto;
            position: absolute;
            right: 0;
            text-align: center;
            top: 0;
            user-select: none;
            width: 10em;
        }
        
        .spinner .bounce1 {
            -webkit-animation-delay: -0.32s;
            animation-delay: -0.32s;
            margin-right: 1em;
        }
        
        .spinner .bounce2 {
            -webkit-animation-delay: -0.16s;
            animation-delay: -0.16s;
            margin-right: 1em;
        }
        
        .spinner > div {
            -moz-border-radius: 100%;
            -webkit-animation-fill-mode: both;
            -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
            -webkit-border-radius: 100%;
            animation-fill-mode: both;
            animation: bouncedelay 1.4s infinite ease-in-out;
            background-color: #ffffff;
            border-radius: 100%;
            display: inline-block;
            height: 1em;
            width: 1em;
        }
        
        .landing-slider .spinner > div {
            background-color: rgba(255, 255, 255, 0.5);
        }
        
        .landing-els .spinner > div {
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        @-webkit-keyframes bouncedelay {
            0%,
            80%,
            100% {
                -webkit-transform: scale(0);
            }
            40% {
                -webkit-transform: scale(1);
            }
        }
        
        @keyframes bouncedelay {
            0%,
            80%,
            100% {
                -webkit-transform: scale(0);
                transform: scale(0);
            }
            40% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }
        </style>
        <div class="loader-overlay">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript"> 
    var isSupport = function() {
            var agent = navigator.userAgent
            var isIE = agent.indexOf('MSIE') > 0
            if (isIE) {
                //need ie version>10
                var version = parseInt(agent.split('MSIE')[1])
                if (version < 10) {
                    return false
                }
            }
            return true
        }()
        /**
         * load single script
         */
    var loadSingleScript = function(src, callback) {
            var body = document.getElementsByTagName('body')[0]
            var scriptNewNode = document.createElement('script')
            scriptNewNode.src = src + '?version=@version'
            if (callback) {
                scriptNewNode.onload = callback
            }
            body.appendChild(scriptNewNode)
        }
        /**
         * load multi script
         */
    var loadScripts = function(srcs, callback) {
            if (!srcs || srcs.length === 0) {
                if (callback) {
                    callback()
                }
            } else {
                var index = 0
                for (var i = 0; i < srcs.length; i++) {
                    var src = srcs[i]
                    loadSingleScript(src, function() {
                        index += 1
                        if (index === srcs.length) {
                            if (callback) {
                                callback()
                            }
                        }
                    })
                }
            }
        }
        /**
         * load multi array script
         */
    var asyncLoadScripts = function(arrays, callback) {
            if (!arrays || arrays.length === 0) {
                return callback()
            } else {
                var scripts = arrays[0]
                loadScripts(scripts, function() {
                    var nextArrays = arrays.slice(1)
                    asyncLoadScripts(nextArrays, callback)
                })
            }
        }
        /**
         * parse remote html scripts by order attribute
         */
    var parseDocumentScripts = function() {
        var scriptElements = document.getElementsByTagName('script')
        var orders = []
        var orderArrays = {}
        var lastArray = []
        for (var i = 0; i < scriptElements.length; i++) {
            var item = scriptElements[i]
            var order = item.getAttribute('order')
            if (order) {
                var currentArray = orderArrays[order]
                if (!currentArray) {
                    currentArray = []
                    orders.push(order)
                }
                currentArray.push(item.src)
                orderArrays[order] = currentArray
            } else {
                if (item.src) {
                    lastArray.push(item.src)
                }
            }
        }
        var data = []
        for (var i = 0; i < orders.length; i++) {
            var order = orders[i]
            var scriptArray = orderArrays[order]
            data.push(scriptArray)
        }
        data.push(lastArray)
        return data
    }
    if (!isSupport) {
        alert('your browser version too lower,please upgrade!')
    } else {
        var url = @url
        var htmlElement = document.getElementsByTagName('html')[0]
        var loadingNode = document.getElementById('minicloud-loading')
        var xmlHttp = new XMLHttpRequest()
        xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState === 4) {
                if (xmlHttp.status === 200) {
                    var loadingHtml = loadingNode.innerHTML
                    var content = xmlHttp.responseText
                    content = content.replace('@minicloud-loading',loadingHtml)
                    //replace static.minicloudjs.com html/css content 
                    htmlElement.innerHTML = content
                    var bodyElement = document.getElementsByTagName('body')[0]                    
                    //show static.minicloudjs.com javascript content   
                    var scripts = parseDocumentScripts()
                    asyncLoadScripts(scripts, function() {
                        var scriptNode = document.getElementById('minicloud-script')
                        if (scriptNode) {
                            var scriptNewNode = document.createElement("script")
                            scriptNewNode.text = scriptNode.innerHTML
                            bodyElement.appendChild(scriptNewNode) 
                        }                                              
                    })
                } else {
                    //hide loadding 
                    loadingNode.style.display = 'none'
                    alert('Cannot access url,please check\n' + url)
                }
            }
        }
        xmlHttp.open("GET", url, true)
        xmlHttp.send(null)
    } 
    </script>
</body>

</html>
